<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>新 高級ジェネ™ 3 作った方がいい? - 投票 | ニュース | 新 高級ジェネ™ 公式サイト</title>
  <meta name="description" content="Super Hiko14がホストを運営するマインクラフト統合版サーバー『新 高級ジェネ』の公式サイト! 高級ジェネの運営メンバーやルールなどが記述されているページもあり、最新情報をお届けするニュースや、お問い合わせページ、Youtube、X、オープンチャット、Discordなどのリンクも記載!">
  <meta name="google-site-verification" content="9_dxQw3tiC3vs0ur8X4JLnf7vINwHN3m_qnyZO_3PDM" />

<!-- OGP (Open Graph Protocol) -->
  <meta property="og:title" content="新 高級ジェネ™ 公式サイト">
  <meta property="og:description" content="Super Hiko14がホストを運営するマインクラフト統合版サーバー『新 高級ジェネ』の公式サイト! 高級ジェネの運営メンバーやルールなどが記述されているページもあり、最新情報をお届けするニュースや、お問い合わせページ、Youtube、X、オープンチャット、Discordなどのリンクも記載!">
  <meta property="og:image" content="https://kokyujene.github.io/ogp.webp">
  <meta property="og:url" content="https://kokyujene.github.io">
  <meta property="og:type" content="website">

<!-- X(Twitter)用 -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Kokyujene">
  <meta name="twitter:title" content="新 高級ジェネ 公式サイト">
  <meta name="twitter:description" content="Super Hiko14がホストを運営するマインクラフト統合版サーバー『新 高級ジェネ』の公式サイト! 高級ジェネの運営メンバーやルールなどが記述されているページもあり、最新情報をお届けするニュースや、お問い合わせページ、Youtube、X、オープンチャット、Discordなどのリンクも記載!">
  <meta name="twitter:image" content="https://kokyujene.github.io/ogp.webp">

<!-- ico, etc... -->
  <link rel="icon" href="https://kokyujene.github.io/favicon.ico" type="image/x-icon">
  <link rel="icon" href="https://kokyujene.github.io/favicon.png" type="image/png">
  <link rel="shortcut icon" href="https://kokyujene.github.io/favicon.ico">
  <link rel="stylesheet" href="https://kokyujene.github.io/css/style.css">
  <link rel="shortcut icon" type="image/webp" href="https://kokyujene.github.io/favicon.webp">
  <link rel="icon" type="image/png" sizes="16x16" href="https://kokyujene.github.io/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://kokyujene.github.io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="https://kokyujene.github.io/favicon-48x48.png">

<!-- iOS Safari 用 -->
  <link rel="apple-touch-icon" sizes="180x180" href="https://kokyujene.github.io/apple-touch-icon.png">

<!-- Android / Chrome PWA 用 -->
  <link rel="manifest" href="https://kokyujene.github.io/site.webmanifest">

<!-- レガシー互換 -->
  <link rel="shortcut icon" href="https://kokyujene.github.io/favicon.ico">
</head>

  <style>
    .news-item { border-bottom: 1px solid #ccc; padding: 10px 0; }
    .news-category { font-size: 0.8em; padding: 2px 6px; border-radius: 4px; margin-right: 8px; }
    .cat-緊急 { background: red; color: white; }
    .cat-特大お知らせ { background: orange; color: white; }
    .cat-ちょっとしたお知らせ { background: green; color: white; }

    /* オーバーレイ */
#imgOverlay {
  display: none; /* 非表示デフォルト */
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.85);
  z-index: 9999;
  justify-content: center;
  align-items: center;
}

/* 拡大画像 */
#imgOverlay img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 6px;
  box-shadow: 0 0 20px rgba(0,0,0,0.8);
  animation: zoomIn 0.3s ease;
}

/* 閉じるボタン */
#closeOverlay {
  position: absolute;
  top: 20px; right: 30px;
  font-size: 40px;
  color: #fff;
  cursor: pointer;
  user-select: none;
}

@keyframes zoomIn {
  from { transform: scale(0.7); opacity: 0; }
  to   { transform: scale(1);   opacity: 1; }
}

/* サムネイルにカーソルを置いたとき */
.news-img {
  cursor: zoom-in;
  transition: opacity 0.3s;
  border-radius:18px;
}
.news-img:hover {
  opacity: 0.8;
  border-radius:28px;
}

button {
  background-color: #ffefce;
  color: #362400;
  font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif;
  font-size: 25px;
  border-radius:10px;
  border-color: #ffe1a4;
}
@media screen and (max-width: 768px) {

button {
  background-color: #ffefce;
  color: #362400;
  font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif;
  font-size: 15px;
  border-radius:5px;
  border-color: #ffe1a4;
}

}

li {
  display: flex;
  text-align: center;
  align-items: center;
}
  </style>

<body>
<!-- 画像拡大表示用のオーバーレイ -->
<div id="imgOverlay">
  <span id="closeOverlay">&times;</span>
  <img id="overlayImg" src="" alt="">
</div>

<div class="wrapper">

<header>
  <!-- 左のロゴ -->
  <a href="https://kokyujene.github.io/" class="logo">
    <img src="https://kokyujene.github.io/images/logo_icon.webp" alt="LOGO">
  </a>

  <!-- PC用ナビゲーション -->
  <nav class="nav-links">
    <ul>
      <li>
        <a href="https://kokyujene.github.io">
          <small class="sub-title">\-Home-/</small>
          <h3 class="h2-header">ホーム</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/members/">
          <small class="sub-title">\-Member-/</small>
          <h3 class="h2-header">メンバー紹介</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/rules/">
          <small class="sub-title">\-Rules-/</small>
          <h3 class="h2-header">ルール</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/news/">
          <small class="sub-title">\-News-/</small>
          <h3 class="h2-header">ニュース</h3>
        </a>
      </li>
    </ul>
  </nav>

  <!-- スマホ用メニューアイコン（右寄せ） -->
  <img src="https://kokyujene.github.io/images/menu.webp" alt="メニュー" class="menu-icon">
  <img src="https://kokyujene.github.io/images/close.webp" alt="閉じる" class="close-icon">

  <!-- モバイルメニュー -->
<!-- モバイルメニュー -->
<div id="mobileMenu" class="mobile-menu">
  <ul>
    <li>
      <a href="https://kokyujene.github.io">
        <small class="sm-sub-title">\-Home-/</small>
        <h3 class="sm-header">ホーム</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/members/">
        <small class="sm-sub-title">\-Members-/</small>
        <h3 class="sm-header">メンバー紹介</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/rules/">
        <small class="sm-sub-title">\-Rules-/</small>
        <h3 class="sm-header">ルール</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/news/">
        <small class="sm-sub-title">\-News-/</small>
        <h3 class="sm-header">ニュース</h3>
      </a>
    </li>
  </ul>
</div>
</header>

  <main>

  <div class="fade-in">
<h1 class="c2_h1">新 高級ジェネ™ 3 作った方がいい? - 投票 | ニュース</h1>
  </div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-Notice-/</small>
    <h2>お知らせ</h2>
    <p>お騒がせさせてすみませんでした。<br>(2025/)9/12に、20人程のユーザーデータを消してしまいました。<br>バックアップを緊急で開いたのですが、そのバックアップの使用をやめます。<br>すみませんでした。</p>
    </div>
    </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-About Kokyujene™ 3-/</small>
    <h2>高級ジェネ™ 3 について</h2>
    <p>高級ジェネ™ 3(gen6) を作成しようと考えているのですが、いつ時期に作った方がいいですか?</p>
    </div>
    </div>
</div>
</div>

<div class="fade-in">
  <div class="content-box">
    <div class="center-text">
    <div class="side-text">
      <div class="box1">
    <small class=sub-title>\-Vote-/</small>
    <h2>投票</h2>
    
        <button type="button" onclick="voteIndex(0)">作った方がいい</button><br>
        <button type="button" onclick="voteIndex(1)">近々して作ってほしいけどまだいい</button><br>
        <button type="button" onclick="voteIndex(2)">記念日とかに作ってほしい</button><br>
        <button type="button" onclick="voteIndex(3)">もう少し待って</button><br>
        <button type="button" onclick="voteIndex(4)">まだいい</button><br>

        <h4>現在の投票結果</h4>
        <ul id="results"></ul>
      </div>
    </div>
  </div>
</div>
</div>

    <div class="center-text">
    <a href="https://kokyujene.github.io/news/" class="my-button2">記事一覧へ</a>

  </main>

<footer class="footer">
  <div class="footer-icons">
    <a href="https://line.me/ti/g2/NUmh2HQ_JhLH9x7VNaR1XAYqIePaEeziz5HClw" target="_blank">
      <img src="https://kokyujene.github.io/images/line-logo.webp" alt="LINE" class="footer-icon">
    </a>
    <a href="https://x.com/Kokyujene" target="_blank">
      <img src="https://kokyujene.github.io/images/x-logo.webp" alt="X" class="footer-icon">
    </a>
    <img id="theme-icon" src="https://kokyujene.github.io/images/moon.webp" alt="テーマ切替" class="theme-toggle-icon">
  </div>

  <div class="footer-text">
    © <span id="year"></span> KokyuJene™ All rights reserved. | 
    <a href="https://kokyujene.github.io/privacypolicy" class="footer-link">プライバシーポリシー</a> | 
    <a href="https://kokyujene.github.io/terms" class="footer-link">利用規約</a> | 
    <a href="https://kokyujene.github.io/license" class="footer-link">ライセンス</a> | 
    <a href="https://kokyujene.github.io/contact" class="footer-link">お問い合わせ</a>
  </div>
</footer>

<script src="https://kokyujene.github.io/js/script.js"></script>

<script>
const menuIcon = document.querySelector('.menu-icon');
const closeIcon = document.querySelector('.close-icon');
const mobileMenu = document.querySelector('.mobile-menu');

menuIcon.addEventListener('click', () => {
  mobileMenu.classList.add('active');
  menuIcon.style.display = 'none';
  closeIcon.style.display = 'block';
});

closeIcon.addEventListener('click', () => {
  mobileMenu.classList.remove('active');
  menuIcon.style.display = 'block';
  closeIcon.style.display = 'none';
});
</script>

<script>
    const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
      } else {
        entry.target.classList.remove('show');
      }
    });
  });

  document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>

  <script>
    fetch("news.json")
      .then(res => res.json())
      .then(data => {
        // 新しい順にソート
        data.sort((a, b) => new Date(b.date) - new Date(a.date));

        const container = document.getElementById("news-list");
        container.innerHTML = "";
        data.forEach(item => {
          const div = document.createElement("div");
          div.className = "news-item";
          div.innerHTML = `
            <span class="news-category cat-${item.category}">»${item.category}«</span>
            <a href="./${item.id}/">${item.title}</a>
            <br><small>${item.date}</small><br>
            <p>${item.description}</p>
          `;
          container.appendChild(div);
        });
      })
      .catch(err => {
        document.getElementById("news-list").textContent = "読み込みに失敗しました。";
        console.error(err);
      });
  </script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const imgs = document.querySelectorAll(".news-img");
  const overlay = document.getElementById("imgOverlay");
  const overlayImg = document.getElementById("overlayImg");
  const closeBtn = document.getElementById("closeOverlay");

  imgs.forEach(img => {
    img.addEventListener("click", () => {
      overlay.style.display = "flex";
      overlayImg.src = img.src;
    });
  });

  // 閉じる処理（×ボタン or オーバーレイクリック）
  closeBtn.addEventListener("click", () => overlay.style.display = "none");
  overlay.addEventListener("click", e => {
    if (e.target === overlay) overlay.style.display = "none";
  });
});
</script>

<script>
/* 安全版投票スクリプト（重複送信防止・DOM安全チェック・5秒自動更新） */
const API_URL = "https://script.google.com/macros/s/AKfycbxvMS9dTqnUAdaKGfyoIUFXB9QahS3Iv8wT2BZREXFp_sKWrMKancTnla7dBrA0VOABmQ/exec";
const STORAGE_KEY = "AKfycbxvMS9dTqnUAdaKGfyoIUFXB9QahS3Iv8wT2BZREXFp_sKWrMKancTnla7dBrA0VOABmQ";

// 状態
let optionsData = [];
let inProgress = false; // 送信中フラグ
let handlersAttached = false; // 二重アタッチ防止

// ページ読み込み後に初期化
document.addEventListener('DOMContentLoaded', () => {
  safeAttachHandlers();
  loadResults();
  setInterval(loadResults, 5000);
});

// 結果取得
async function loadResults() {
  try {
    const res = await fetch(API_URL, { method: 'GET' });
    if (!res.ok) throw new Error('GET failed: ' + res.status);
    const data = await res.json();
    optionsData = data || [];

    // 結果表示（ある場合のみ）
    const resultsEl = document.getElementById('results');
    if (resultsEl) {
      resultsEl.innerHTML = '';
      optionsData.forEach(row => {
        const li = document.createElement('li');
        li.textContent = `${row[0]}: ${row[1]}票`;
        resultsEl.appendChild(li);
      });
    }

    // ボタンにラベル/choice を設定（ある場合のみ）
    document.querySelectorAll('.box1 > button').forEach((btn, i) => {
      if (optionsData[i]) btn.dataset.choiceName = String(optionsData[i][0]);
      // 既に投票済みなら無効化
      if (localStorage.getItem(STORAGE_KEY)) {
        btn.disabled = true; btn.style.opacity = '0.5'; btn.style.cursor = 'default';
      } else {
        btn.disabled = false; btn.style.opacity = '1'; btn.style.cursor = 'pointer';
      }
    });

  } catch (err) {
    console.error('loadResults error:', err);
    const resultsEl = document.getElementById('results');
    if (resultsEl) resultsEl.innerHTML = '<li>読み込みエラー</li>';
  }
}

// 安全にハンドラを一度だけ付ける
function safeAttachHandlers() {
  if (handlersAttached) return;
  handlersAttached = true;

  // グローバル関数（inline onclick 用）
  window.voteIndex = function(idx) {
    const voted = !!localStorage.getItem(STORAGE_KEY);
    if (voted) { alert('既に投票済みです。'); return; }
    const choice = (optionsData[idx] && String(optionsData[idx][0])) || null;
    if (!choice) { alert('選択肢が読み込まれていません。少し待ってから押してください。'); return; }
    vote(choice);
  };

  // ボタンクリックを付与（既に inline onclick を使っている場合でも安全）
  const buttons = document.querySelectorAll('.box1 > button');
  buttons.forEach((btn, idx) => {
    // 二重で addEventListener がつかないよう、data属性でガード
    if (btn.dataset.handlerAttached) return;
    btn.dataset.handlerAttached = 'true';
    btn.addEventListener('click', (e) => {
      const voted = !!localStorage.getItem(STORAGE_KEY);
      if (voted) { alert('既に投票済みです。'); return; }
      // 送信中は無視
      if (inProgress) { return; }
      const choice = btn.dataset.choiceName || (optionsData[idx] && String(optionsData[idx][0])) || btn.textContent.trim();
      vote(choice);
    });
  });
}

// 投票処理（inProgress フラグで二重送信防止）
async function vote(choiceName) {
  if (!choiceName) { alert('投票先が不明です'); return; }
  if (inProgress) return;
  inProgress = true;

  // すぐに UI を無効化（瞬間二重クリックを防ぐ）
  document.querySelectorAll('.box1 > button').forEach(b => { b.disabled = true; b.style.opacity = '0.5'; b.style.cursor = 'default'; });

  try {
    // 送信は form-urlencoded（プリフライトを出さない）
    const body = new URLSearchParams();
    body.append('choice', choiceName);

    const res = await fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
      body: body.toString()
    });

    const text = await res.text();
    let json = null;
    try { json = JSON.parse(text); } catch(e){ json = null; }

    console.log('POST status', res.status, 'body', text);

    if (!res.ok) {
      alert('投票に失敗しました(サーバー応答 ' + res.status + ')。');
      // 送信失敗ならボタンは再び有効にしておく（ただし投票フラグは立てない）
      document.querySelectorAll('.box1 > button').forEach(b => { b.disabled = false; b.style.opacity = '1'; b.style.cursor = 'pointer'; });
      inProgress = false;
      await loadResults();
      return;
    }

    // 成功時のハンドリング
    if (json && (json.status === 'success' || json.status === 'already_voted')) {
      localStorage.setItem(STORAGE_KEY, 'true');
      if (json.status === 'success') alert('投票ありがとうございました!');
      else alert('既に投票済みです。');
    } else {
      localStorage.setItem(STORAGE_KEY, 'true');
    }

    await loadResults();

  } catch (err) {
    console.error('vote fetch error:', err);
    alert('投票に失敗しました(ネットワークエラー)。');
    // 失敗時は再度押せるように戻す
    document.querySelectorAll('.box1 > button').forEach(b => { b.disabled = false; b.style.opacity = '1'; b.style.cursor = 'pointer'; });
  } finally {
    inProgress = false;
  }
}
</script>

</body>
</html>