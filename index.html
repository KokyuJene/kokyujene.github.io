<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>新 高級ジェネ 公式サイト</title>
  <meta name="description" content="Super Hiko14がホストを運営するマインクラフト統合版サーバー『新 高級ジェネ』の公式サイト! マイクラで是非プレイしてみてね! 高級ジェネの運営メンバーやルールが記述されているページもあり、お問い合わせやYoutube、オープンチャットなどのリンクも記載!">
  <meta name="google-site-verification" content="9_dxQw3tiC3vs0ur8X4JLnf7vINwHN3m_qnyZO_3PDM" />

<!-- OGP (Open Graph Protocol) -->
  <meta property="og:title" content="新 高級ジェネ 公式サイト">
  <meta property="og:description" content="Super Hiko14が運営するマインクラフト統合版サーバー『新 高級ジェネ』公式サイト!">
  <meta property="og:image" content="https://kokyujene.github.io/images/ogp.webp">
  <meta property="og:url" content="https://kokyujene.github.io">
  <meta property="og:type" content="website">

<!-- X(Twitter)用 -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Kokyujene">
  <meta name="twitter:title" content="新 高級ジェネ 公式サイト">
  <meta name="twitter:description" content="Super Hiko14が運営するマインクラフト統合版サーバー『新 高級ジェネ』公式サイト!">
  <meta name="twitter:image" content="https://kokyujene.github.io/images/ogp.webp">

<!-- ico, etc... -->
  <link rel="icon" href="https://kokyujene.github.io/favicon.ico" type="image/x-icon">
  <link rel="icon" href="https://kokyujene.github.io/favicon.png" type="image/png">
  <link rel="shortcut icon" href="https://kokyujene.github.io/favicon.ico">
  <link rel="apple-touch-icon" href="https://kokyujene.github.io/favicon.png">
  <link rel="stylesheet" href="css/style.css">
  <link rel="shortcut icon" type="image/webp" href="https://kokyujene.github.io/favicon.webp">
</head>

<style>
.Warning {
  color: #800400;
}

.Warningbox1 {
  box-sizing: border-box;
  background-color: #ffb3b3;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  text-align: center;
  align-items: center;  
  width: 140%;
  margin-left: -20%;
}

@media screen and (max-width: 768px) {
  .box1 {
    box-sizing: border-box;
  }
}

li {display: flex;}

.news-box{
  padding:14px; border-radius:8px; background:#fff6e5; box-shadow:0 2px 8px rgba(0,0,0,0.06); margin-bottom:12px; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif;
}

    .news-item { border-bottom: 1px solid #ccc; padding: 10px 0; }
    .news-category { font-size: 0.8em; padding: 2px 6px; border-radius: 4px; margin-right: 8px; }
    .cat-緊急 { background: red; color: white; }
    .cat-特大お知らせ { background: orange; color: white; }
    .cat-ちょっとしたお知らせ { background: green; color: white; }

    /* オーバーレイ */
#imgOverlay {
  display: none; /* 非表示デフォルト */
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.85);
  z-index: 9999;
  justify-content: center;
  align-items: center;
}

/* 拡大画像 */
#imgOverlay img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 6px;
  box-shadow: 0 0 20px rgba(0,0,0,0.8);
  animation: zoomIn 0.3s ease;
}

/* 閉じるボタン */
#closeOverlay {
  position: absolute;
  top: 20px; right: 30px;
  font-size: 40px;
  color: #fff;
  cursor: pointer;
  user-select: none;
}

@keyframes zoomIn {
  from { transform: scale(0.7); opacity: 0; }
  to   { transform: scale(1);   opacity: 1; }
}

/* サムネイルにカーソルを置いたとき */
.news-img {
  cursor: zoom-in;
  transition: opacity 0.3s;
  border-radius:18px;
}
.news-img:hover {
  opacity: 0.8;
  border-radius:28px;
}

/* ===== hero 全画面 → 縮小 → 移動アニメ ===== */
#hero {
  position: relative;
  z-index: 500; /* 必要に応じて調整（ヘッダーより上に出したければ大きく） */
}

/* 固定で全画面に掲示されるラッパー */
#heroWrapper {
  position: fixed;
  inset: 0; /* top:0;left:0;right:0;bottom:0; */
  display: flex;
  justify-content: center;
  align-items: center;
  background: #000;
  z-index: 1000;
  overflow: hidden;
  transition: opacity 0.25s ease;
  will-change: transform, opacity;
}

/* 画像は cover */
#heroWrapper img#heroImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* スロット（最終的に四角の位置になる要素） */
.logo-slot {
  width: 120px;            /* 最終の正方形サイズ（調整可） */
  height: 120px;
  overflow: hidden;
  border-radius: 8px;     /* 四角の角丸、不要なら0に */
  background: #fff0;
  display: inline-block;
  position: relative;
}

/* slot の中の画像は正方形にフィット */
.logo-slot img#slotImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  opacity: 0; /* JS完了まで見せない */
  transition: opacity 0.3s ease;
}

/* Welcome 文は最初隠す */
.welcome-text {
  opacity: 0;
  transform: translateY(6px);
  transition: opacity 0.45s ease, transform 0.45s ease;
  text-align: left; /* お好みで中央に */
}

/* 画面ロック中に body に付けるクラス */
.scroll-locked {
  overflow: hidden !important;
  touch-action: none !important;
}

/* prefers-reduced-motion サポート */
@media (prefers-reduced-motion: reduce) {
  #heroWrapper { transition: none; }
  .welcome-text { transition: none; }
  .logo-slot img#slotImage { transition: none; }
}

</style>

<body>
<div class="wrapper">

<header>
  <!-- 左のロゴ -->
  <a href="https://kokyujene.github.io/" class="logo">
    <img src="https://kokyujene.github.io/images/logo_icon.webp" alt="LOGO">
  </a>

  <!-- PC用ナビゲーション -->
  <nav class="nav-links">
    <ul>
      <li>
        <a href="https://kokyujene.github.io">
          <small class="sub-title">\-Home-/</small>
          <h3 class="h2-header">ホーム</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/members/">
          <small class="sub-title">\-Member-/</small>
          <h3 class="h2-header">メンバー紹介</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/rules/">
          <small class="sub-title">\-Rules-/</small>
          <h3 class="h2-header">ルール</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/rules/">
          <small class="sub-title">\-News-/</small>
          <h3 class="h2-header">ニュース</h3>
        </a>
      </li>
    </ul>
  </nav>

  <!-- スマホ用メニューアイコン（右寄せ） -->
  <img src="https://kokyujene.github.io/images/menu.webp" alt="メニュー" class="menu-icon">
  <img src="https://kokyujene.github.io/images/close.webp" alt="閉じる" class="close-icon">

  <!-- モバイルメニュー -->
<!-- モバイルメニュー -->
<div id="mobileMenu" class="mobile-menu">
  <ul>
    <li>
      <a href="https://kokyujene.github.io">
        <small class="sm-sub-title">\-Home-/</small>
        <h3 class="sm-header">ホーム</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/members/">
        <small class="sm-sub-title">\-Members-/</small>
        <h3 class="sm-header">メンバー紹介</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/rules/">
        <small class="sm-sub-title">\-Rules-/</small>
        <h3 class="sm-header">ルール</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/news/">
        <small class="sm-sub-title">\-News-/</small>
        <h3 class="sm-header">ニュース</h3>
      </a>
    </li>
  </ul>
</div>
</header>

  <main>
<!-- ===== HERO: 画面読み込み時に全画面で表示される要素 ===== -->
<section aria-hidden="true" id="hero">
  <div id="heroWrapper">
    <img id="heroImage" src="/images/wall_back.webp" alt="" />
  </div>
</section>

<!-- ここはサイト内の普通のコンテンツ。四角が収まる場所に .logo-slot を置く -->
<section class="box1">
  <div class="box1-inner">
    <!-- 他の要素はそのまま。ここに小さな正方形ロゴが最終的に置かれます -->
    <div class="logo-slot" id="logoSlot" aria-hidden="true">
      <!-- 最終表示用の小さな画像（JS完了まで隠れている） -->
      <img id="slotImage" src="/images/wall_back.webp" alt="ロゴ">
    </div>

    <div class="box1-text">
      <h1 id="welcomeText" class="welcome-text">ようこそ、新 高級ジェネへ</h1>
      <!-- welcomeText はアニメーション後に出す（最初は非表示） -->
      </div>
  </div>
</section>

  <div class="fade-in">
<div class="visitor-counter">
  <h3 class="text_s1">総訪問回数</h3>
  <span id="count">Loading...</span>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
<div class="server-status-container">
  <div class="server-status">
  <h2 class="sub-title">\-Server Status-/</h2>
  <h2>サーバー状態</h2>
  </div>
  <div id="server-status" class="status-box">読み込み中...</div>
</div>
<p>時々、更新が遅れたり、サーバーを開かないこともあります。<br>その際はすみません。どうかご了承ください。</p>
  </div>
  </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="Warningbox1">
    <div class="Warning">
    <small class=sub-title>\-! Warning !-/</small>
    <h2>! 注意 !</h2>
    </div>
    <p>現在、新 高級ジェネ™のパクリワールドが出ています。<br>あくまで、画像は例(例と言っても、実際にあるもの)です。<br><br>
<div class="image-container">
  <div class="center-image-left">
		<img src="images/pakuri.webp" alt="example_pakuri" class="maru_img">
  </div>
</div>
<p>実際のパクリワールド</p>
      <br><h3>入る前に確認してほしいこと</h3>
      <br>1.ワールド名が「§e§l新 §6高§e級§fジ§eェ§6ネ」になっているか
      <br>2.ホストのユーザー名が、「Super Hiko14」もしくは、「KenNova758」(KenNova758はkento7587を同一人物で、名前が変更されました。)、「kazekiri900」のどれかになっているか
      <br>以上のことに注意して、マインクラフト「高級ジェネ」ライフを楽しんでください!<br>
      <br><h3>お願い</h3>
      <br>見かけ次第、新 高級ジェネ™の運営に報告し、そのパクったホストをできるのであれば通報することです。あと、興味本位で入らないようにしましょう。</p>
  </div>
  </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-Official Discord Server-/</small>
    <h2>公式Discord</h2>
<a href="https://discord.gg/ukFH4NtDG6" target="_blank" class="my-button2">
  公式Discordサーバーに参加
</a>
    </div>
    </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
  <h2 class="sub-title">\-X(formerly Twitter)-/</h2>
  <h2>X(旧Twitter)</h2>
<a class="twitter-timeline" 
   href="https://twitter.com/Kokyujene?ref_src=twsrc%5Etfw" target="_blank">
   Tweets by Kokyujene
</a>
<p><br></p>
<a href="https://x.com/Kokyujene" target="_blank" class="my-button2">
  公式Xアカウントを見てみる
</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<br>
  </div>
  </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
<section id="latest-news">
  <h2>最新ニュース</h2>
  <ul id="news-list"></ul>
  <div class="more-link"><a href="https://kokyujene.github.io/news/">→ ニュース一覧へ</a></div>
</section>
    </div>
    </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-Servers full of luxury-/</small>
    <h2>高級感満載のサーバー</h2>
    <p> マインクラフト 統合版で「Super Hiko14」をフレンドに追加して、高級ジェネをプレイしよう!</p>
    <a href="https://launch.minecraft.net/profile/Super%20Hiko14" class="my-button" target="_blank">今すぐプレイ!</a>
  </div>
  </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-Server Advantages-/</small>
    <h2>このサーバーの長所</h2>
    <p>やりこみ要素が豊富です。称号だけでも8個あります!(現在時点)<br>
    称号以外にも、実績やジェネの通貨、見栄えの良い建築などで、モチベーションがとてもあがります!<br>
    これはマイクラだけにとどまらず、オープンチャットを展開しています!少し下にスクロールするとリンクがあります。是非参加してみてください!</p>
  </div>
  </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-Main Members-/</small>
    <h2>主なメンバー</h2>
<section class="member-intro">
  <div class="member-grid">
  <div class="member-grid">
<a href="https://kokyujene.github.io/members/Super_Hiko14/" class="member-card card-a">
  <div class="role">Owner</div>
  <div class="divider"></div>
  <div class="info-row">
    <img src="images/m_hiko.webp" alt="Owner">
    <span class="name">Super Hiko14</span>
  </div>
  <p class="comment">kento教信者になりましょう(???)</p>
</a>
</div>

  <div class="member-grid">
<a href="https://kokyujene.github.io/members/kento7587/" class="member-card card-b">
  <div class="role">Deputy Owner</div>
  <div class="divider"></div>
  <div class="info-row">
    <img src="images/m_kento.webp" alt="Deputy Owner">
    <span class="name">KenNova758</span>
  </div>
  <p class="comment">こんにちは！kentoだよ～</p>
</a>
</div>
    
  <div class="member-grid">
<a href="https://kokyujene.github.io/members/kazekiri900/" class="member-card card-c">
  <div class="role">Deputy Owner</div>
  <div class="divider"></div>
  <div class="info-row">
    <img src="images/m_kazekiri.webp" alt="Deputy Owner">
    <span class="name">kazekiri900</span>
  </div>
  <p class="comment">高級ジェネサーバーホストになれる権限を持ってる中では一番高性能なパソコンを使ってます。</p>
</a>
</div>
</div>

</section>
    </div>
    </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-Other Services-/</small>
    <h2>その他サービス</h2>
    <p>マインクラフト以外のサービスで例えばこのサイト。<br>
    他にもX(旧Twitter)やオープンチャットもあります!<br>
    オープンチャットではライブトークで、雑談したり、投票を行ったり、今日、いつ開くかや遅れるなどの知らせをあらかじめ見ることができます!<br>
    <div class="center-text">
    <a href="https://www.youtube.com/channel/UCi_f14XmiLkd7S5liwxnU2g" class="my-button2" target="_blank">公式Youtube</a><br>
    </div><br>
    <div class="center-text">
    <a href="https://www.youtube.com/@Kazekiri.pc.minecraft" class="my-button2" target="_blank">kazekiri900のYoutube</a><br>
    </div><br>
    <div class="center-text">
    <a href="https://line.me/ti/g2/NUmh2HQ_JhLH9x7VNaR1XAYqIePaEeziz5HClw" class="my-button2" target="_blank">公式オープンチャット</a><br>
    </div><br>
    <div class="center-text">
    <a href="https://x.com/Kokyujene" class="my-button2" target="_blank">公式Xアカウント</a><br>
    </div><br>
    <a href="https://discord.gg/ukFH4NtDG6" target="_blank" class="my-button2">
    公式Discordサーバー
    </a></p>
    <p class="text_s3">okaki5013を許してはいけません...。</p>
  </div>
  </div>
</div>
</div>

<div class="fade-in">
<div class="content-box">
    <div class="side-text">
    <div class="box1">
    <small class=sub-title>\-Server rules-/</small>
    <h2>サーバーのルールなど</h2>
    <p>このサイトには高級ジェネのルールがあります!内容はほとんど変わりません!!少し整理されているので多少は見やすいと思います。<br>
    <a href="https://kokyujene.github.io/rules/" class="my-button">ルール</a><br>
    <a href="https://kokyujene.github.io/privacypolicy/" class="my-button">プライバシーポリシー</a></p>
  </div>
  </div>
</div>


</div>



<div class="content-box">
<div class="center-text">
  <div class="glitch-button">
    <span class="glitch-text">縺翫°縺阪ｒ縺薙ｍ縺昴≧</span>
    <div class="glitch-bg"></div>
  </div>
</div>
</div>

  </main>

<footer class="footer">
  <div class="footer-icons">
    <a href="https://line.me/ti/g2/NUmh2HQ_JhLH9x7VNaR1XAYqIePaEeziz5HClw" target="_blank">
      <img src="https://kokyujene.github.io/images/line-logo.webp" alt="LINE" class="footer-icon">
    </a>
    <a href="https://x.com/Kokyujene" target="_blank">
      <img src="https://kokyujene.github.io/images/x-logo.webp" alt="X" class="footer-icon">
    </a>
    <img id="theme-icon" src="https://kokyujene.github.io/images/moon.webp" alt="テーマ切替" class="theme-toggle-icon">
  </div>

  <div class="footer-text">
    © <span id="year"></span> KoukyuuJene All rights reserved. | 
    <a href="https://kokyujene.github.io/privacypolicy" class="footer-link">プライバシーポリシー</a> | 
    <a href="https://kokyujene.github.io/terms" class="footer-link">利用規約</a> | 
    <a href="https://kokyujene.github.io/license" class="footer-link">ライセンス</a> | 
    <a href="https://kokyujene.github.io/contact" class="footer-link">お問い合わせ</a>
  </div>
</footer>

<script src="js/script.js"></script>

<script>
const menuIcon = document.querySelector('.menu-icon');
const closeIcon = document.querySelector('.close-icon');
const mobileMenu = document.querySelector('.mobile-menu');

menuIcon.addEventListener('click', () => {
  mobileMenu.classList.add('active');
  menuIcon.style.display = 'none';
  closeIcon.style.display = 'block';
});

closeIcon.addEventListener('click', () => {
  mobileMenu.classList.remove('active');
  menuIcon.style.display = 'block';
  closeIcon.style.display = 'none';
});
</script>

<script>
// サーバー状態取得
fetch('https://script.google.com/macros/s/AKfycbwvph3wE2SDcDjqbGyh4_OonhzcmbMUvLJ7ZpGfMyXM8-f23f6_U_dASyRMnBhp9punNw/exec')
  .then(res => res.json())
  .then(data => {
    const statusEl = document.getElementById("server-status");

    if (data.status == 1) {
      statusEl.textContent = "サーバーは開いています";
      statusEl.classList.add("status-open");

      // 光る演出（クラスを一旦外して再追加）
      statusEl.classList.remove("status-glow");
      void statusEl.offsetWidth; // 再描画トリガー
      statusEl.classList.add("status-glow");

    } else {
      statusEl.textContent = "サーバーは開いていません";
      statusEl.classList.add("status-closed");
    }
  })
  .catch(err => {
    const statusEl = document.getElementById("server-status");
    statusEl.textContent = "取得失敗";
    statusEl.classList.add("status-closed");
    console.error(err);
  });
  
    const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
      } else {
        entry.target.classList.remove('show'); // 何度でも再実行
      }
    });
  });

  document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
  
</script>

<script>
fetch("/news/news.json")
  .then(res => res.json())
  .then(data => {
    const list = document.getElementById("news-list");
    data.slice(0, 3).forEach(item => {
      const li = document.createElement("li");
      li.innerHTML = `<a href="${item.link}">
        <span class="tag">»${item.tag}«</span> ${item.title}
      </a>`;
      list.appendChild(li);
    });
  });

</script>

<script>
(function(){
  const heroWrapper = document.getElementById('heroWrapper');
  const heroImage = document.getElementById('heroImage');
  const logoSlot = document.getElementById('logoSlot');
  const slotImage = document.getElementById('slotImage');
  const welcomeText = document.getElementById('welcomeText');

  // パラメータ（必要に応じて調整）
  const ANIM_DURATION = 950; // ms：縮小＋移動アニメの長さ
  const WELCOME_DELAY  = 230; // ms：アニメ完了後、welcome を出す遅延

  // ユーザーが 「動き少なめ」を好む場合はアニメをスキップ
  const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // スクロール禁止用ユーティリティ
  function lockScroll() {
    document.documentElement.classList.add('scroll-locked');
    document.body.classList.add('scroll-locked');
  }
  function unlockScroll() {
    document.documentElement.classList.remove('scroll-locked');
    document.body.classList.remove('scroll-locked');
  }

  // image のロード待ち helper
  function imageLoaded(img) {
    return new Promise(resolve => {
      if (img.complete) return resolve();
      img.addEventListener('load', resolve);
      img.addEventListener('error', resolve); // エラーでも先に進む（フォールバック）
    });
  }

  // 中心 → スロット に移動させるアニメ
  async function runHeroAnimation() {
    // 画像を確実に読み込む（サイズ計測のため）
    await imageLoaded(heroImage);
    await imageLoaded(slotImage); // slotImage は同じファイルだが念のため

    // prefers-reduced-motion の場合はアニメを行わずに即座に配置
    if (reduceMotion) {
      // hide hero and reveal slot immediately
      heroWrapper.style.opacity = '0';
      slotImage.style.opacity = '1';
      welcomeText.style.opacity = '1';
      return;
    }

    // 1) スクロールロック
    lockScroll();

    // 2) 初期（全画面）サイズと位置
    const vw = Math.max(window.innerWidth, 0);
    const vh = Math.max(window.innerHeight, 0);
    // 初期の基準サイズは画面の短辺を正方形基準にする（1:1へ縮小）
    const startSize = Math.min(vw, vh);

    // 3) 目的地（logoSlot）の位置とサイズ（ビューポート基準）
    const slotRect = logoSlot.getBoundingClientRect();
    const targetSize = Math.min(slotRect.width, slotRect.height);
    const targetCenterX = slotRect.left + slotRect.width / 2;
    const targetCenterY = slotRect.top  + slotRect.height / 2;

    // 4) ヒーローの現在の中心（ビューポート中心）
    const startCenterX = vw / 2;
    const startCenterY = vh / 2;

    // 5) 計算：移動差分（px）とスケール
    const dx = targetCenterX - startCenterX;
    const dy = targetCenterY - startCenterY;
    const scale = (targetSize / startSize) || 0.12; // 最小scaleのガード

    // 6) アニメーションのため css transition を使う方法
    // transform の基点は translate(-50%,-50%) を想定
    // まず heroWrapper を中央に保持する設定（既に CSS で中央）
    heroWrapper.style.transition = `transform ${ANIM_DURATION}ms cubic-bezier(.2,.9,.3,1), opacity 220ms linear`;
    // apply transform: 1) 移動 -> translate(dx, dy)  2) 縮小 -> scale(scale)
    // 注意：既存 transform がない前提。transform の元値は translate(0,0) scale(1)
    // We use translate(-50%, -50%) in CSS if needed; here we compute delta in px and apply translate + scale.

    // set transform origin center to ensure good visual
    heroWrapper.style.transformOrigin = 'center center';

    // trigger reflow to ensure transition applied
    void heroWrapper.offsetWidth;

    // apply transform
    heroWrapper.style.transform = `translate(${dx}px, ${dy}px) scale(${scale})`;

    // 7) 終了後に hero をフェードアウトして slotImage を表示
    const onEnd = () => {
      // remove event
      heroWrapper.removeEventListener('transitionend', onEnd);

      // フェードアウト処理（短く）
      heroWrapper.style.opacity = '0';

      // slot 内イメージを表示（少し遅らせて滑らかに）
      setTimeout(() => {
        slotImage.style.opacity = '1';
        // スロットに image を移動させる（必要なら DOM 書き換えでも可）
        // 既に slotImage は同じファイルを指しているため、表示するだけでOK
      }, 120);

      // welcome テキストを少し遅らせてフェードイン
      setTimeout(() => {
        welcomeText.style.opacity = '1';
        welcomeText.style.transform = 'translateY(0)';
      }, ANIM_DURATION + WELCOME_DELAY);

      // スクロール許可
      setTimeout(() => {
        unlockScroll();
        // Optional: remove heroWrapper from DOM so it won't intercept interactions
        try { heroWrapper.parentNode && heroWrapper.parentNode.removeChild(heroWrapper); } catch(e){}
      }, ANIM_DURATION + 260);
    };

    heroWrapper.addEventListener('transitionend', onEnd);

    // safety: if transitionend doesn't fire, fallback timer
    setTimeout(() => {
      // if heroWrapper still in DOM and visible, call onEnd manually
      if (document.body.contains(heroWrapper) && parseFloat(getComputedStyle(heroWrapper).opacity) > 0) {
        onEnd();
      }
    }, ANIM_DURATION + 1000);
  }

  // 初期化：DOM読み込み完了後に実行（script を body 末尾に置いても安全）
  if (document.readyState === 'loading') {
    window.addEventListener('load', runHeroAnimation, { once: true });
  } else {
    // already loaded
    runHeroAnimation();
  }

})();

</script>
</body>
</html>